<h1>
    Как правильно удалять данные в OneBox
</h1>

<p>
    Мы неоднократно сталкивались с тем, что нужно почистить базу пользователей или заказов, но по ошибке удаляются
    рабочие данные. Потом оказывается что бекапа нет или он старый пару дней назад.
</p>
<br/>

<p>
    Во избежания таких ситуаций, в OneBox практически для всех сущностей сделано поле deleted.
</p>
<br/>

<p>
    shopproduct.deleted
    <br/>
    shoporder.deleted
    <br/>
    shoporderproduct.deleted
    <br/>
    users.deleted
</p>
<br/>

<p>
    По умолчанию это поле 0.
    <br/>
    Поэтому, если вы хотите “почистить базу контактов” - то не выполняйте запрос DELETE FROM users WHERE…
    <br/>
    выполняется UPDATE users SET deleted=1 WHERE…
</p>
<br/>

<p>
    это тоже самое, но убережет вас от ошибки.
</p>
<br/>

<h2>Очистка базы</h2>
<p style="color: red;">
    Важный нюанс:
    <br/>
    Если клиент просит очистить вас все товары - то в таком случае можете действительно удалить все запросов DELETE или
    TRUNCATE.
    <br/>
    Если вас просят почистить ТОЛЬКО ЧАСТЬ - то используйте DELETE=1.
</p>
<br/>

<h2>Склады</h2>
<p>
    Если вас просят очистить склад - то не лезте в базу.
    <br/>
    Для этого есть специальные tool-скрипты в модуле storage/tools/
</p>
<br/>