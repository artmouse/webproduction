<h1>Что такое конфиг-параметры engine.mode.php?</h1>

<h2>Что такое конфиг-параметры и зачем они нужны?</h2>
Есть тонкие настройки, которые доступны только администраторам, а
пользователю про них лучше вообще не знать.<br />
Например, это параметры подключения к MySQL, Sphinx, режим работы поиска и т.д.<br />
<br />

Такие параметры прописываются в файле /engine.mode.php.<br />
<br />
Есть так же файл /example.engine.mode.php,
который по сути справочник возможных параметров.
В каждом модуле может быть свой example.engine.mode.php,
если модуль конфигурируется какими-либо параметрами.<br />
<br />

<h2>Как создать свой конфиг-параметр?</h2>
Чтобы объявить свой параметр - в engine.mode.php напишите:<br />

<code><pre>
Engine::Get()->setConfigField('myparameter', 'aaaa');
</pre></code>
<br />
<br />

В качестве данных (в нашем примере aaa) - можно передавать что угодно: чисто, объект, массив, строку.<br />
<br />

<strong>Если вы вносите в проект какие-то изменения и добавляете параметр</strong> - обязательно в example.engine.mode.php допишите его же.<br />
<br />


<h2>Как получить конфиг-параметр?</h2>
Где угодно в любой части кода, в классе, контенте и тд:
<br />

<code><pre>
Engine::Get()->getConfigField('myparameter');
// или
Engine::Get()->getConfigFieldSecure('myparameter');
</pre> </code>
<br />
<br />

getConfigField от getConfigFieldSecure отличается только тем, что getConfigFieldSecure вернет параметр или false, если параметра нет.<br />
А getConfigField вернет параметр или выбросит Engine_Exception, если параметра нет.<br />
<br />

<h2>settings vs configs</h2>
Скорее всего у вас возник вопрос - когда лучше выносить настройку в settings и давать юзеру, или все-таки использовать engine.mode.php config?<br />
В принципе, ответ однозначный: если пользователю нельзя это трогать - то config, иначе settings.<br />
<br />

<h2>Где и как технически работают конфиг-параметры?</h2>
См класс Engine.<br />
Все конфиг-параметры - это паттерн Registry, по сути обычная замена массива.<br />