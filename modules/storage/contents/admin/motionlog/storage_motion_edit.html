<div class="nb-top-nav-place js-top-nav-buffer"></div>
<div class="nb-top-nav js-top-nav">
    <div class="nb-block-tabs">
        <div class="tab-element"><a href="/admin/shop/storage/motionlog/" >{|$translate_motion_log|}</a></div>
        <div class="tab-element"><a href="{|$urlMotion|}" >{|$translate_storage_log|}: {|$type|} {|if $isReturn|}({|$translate_return_small|}){|/if|}</a></div>
        <div class="tab-element"><a href="" class="selected">{|$translate_motion_edit|}</a></div>
        <div class="clear"></div>
    </div>
</div>

{|if $message == 'ok'|}
    <div class="shop-message-success">
        {|$translate_message_success_update|}.
    </div>
{|/if|}

{|if $message == 'error'|}
    <div class="shop-message-error">
        {|$translate_box_message_error|}.<br />

        {|foreach from=$errorsArray item="e"|}
            {|if $e == 'user'|}
                {|$translate_permission_denied|}.<br />
            {|/if|}
            {|if $e == 'price'|}
                {|$translate_incoming_error_price|}.<br />
            {|/if|}
            {|if $e == 'amount'|}
                {|$translate_box_error_amount|}.<br />
            {|/if|}
            {|if $e == 'serial'|}
                {|$translate_incoming_error_serial|}.
            {|/if|}
            {|if $e == 'divisibility'|}
                {|$translate_incoming_error_divisibility|}.
            {|/if|}
            {|if $e == 'laterTransfer'|}
                {|$translate_motion_edit_message_balance|}.<br />                                
            {|/if|}
            {|if $e == 'amountTooLarge'|}
                {|$translate_motion_edit_message_amount_large|}.<br />
                {|$translate_motion_edit_message_balance|}.                              
            {|/if|}
            {|if $e == 'amountTooSmall'|}
                {|$translate_motion_edit_message_amount_small|}.<br />
                {|$translate_motion_edit_message_balance|}.                             
            {|/if|}
        {|/foreach|}
    </div>
{|/if|}

<h2>{|$translate_motion_edit|}: {|$type|} {|if $isReturn|}({|$translate_return_small|}){|/if|}</h2>
<div class="ob-block-details">
    <div class="flex-wrap">
        <div class="ob-data-element">
            <div class="data-view">
                <div class="el-caption">
                    {|$translate_product|}:
                </div>
                <div class="el-value">
                    #{|$productid|} {|$productname|} &mdash; <a
                            href="{|$productHistoryURL|}">{|$translate_motion_product_history|}</a>
                </div>
            </div>
        </div>

        <div class="ob-data-element">
            <div class="data-view">
                <div class="el-caption">
                    {|$translate_date_realization|}:
                </div>
                <div class="el-value">
                    {|$date|}
                </div>
            </div>
        </div>

        <div class="ob-data-element">
            <div class="data-view">
                <div class="el-caption">
                    {|$translate_where_from|}:
                </div>
                <div class="el-value">
                    <a href="{|$storagenamefromURL|}">{|$storagenamefrom|}</a>
                </div>
            </div>
        </div>

        <div class="ob-data-element">
            <div class="data-view">
                <div class="el-caption">
                    {|$translate_where_to|}:
                </div>
                <div class="el-value">
                    <a href="{|$storagenametoURL|}">{|$storagenameto|}</a>
                </div>
            </div>
        </div>

        {|if $username|}
            <div class="ob-data-element">
                <div class="data-view">
                    <div class="el-caption">
                        {|$translate_operator|}:
                    </div>
                    <div class="el-value">
                        {|$username|}
                    </div>
                </div>
            </div>
        {|/if|}

        <div class="ob-data-empty"></div>
        <div class="ob-data-empty"></div>
        <div class="ob-data-empty"></div>
    </div>
</div>

<form action="" method="post" id="form2" class="ob-block-form">
    <table>
        {|if $noEditForAmount|}
            <tr>
                <td>{|$translate_motion_edit_denied|}</td>
                <td></td>
            </tr>
        {|else|}
            <tr>
                <td>{|$translate_number|}:</td>
                <td><input type="text" name="amount" value="{|$control_amount|}" /></td>
            </tr>
        {|/if|}
        <tr>
            <td>{|$translate_price|}:</td>
            <td>
                <input type="text" name="price" value="{|$control_price|}" /> {|$currency|} ({|$tax|})<br />
                ({|$translate_motion_edit_message_price|})
            </td>
        </tr>
        <tr>
            <td>{|$translate_batch_code|}:</td>
            <td>
                <input type="text" name="shipment" value="{|$control_shipment|}" /><br />
                ({|$translate_motion_edit_message_code|})
            </td>
        </tr>
        <tr>
            <td></td>
            <td>
                <input type="hidden" name="ok" value="1" />
                <input class="ob-button" type="button" value="{|$translate_save|}" onclick="if (confirm('{|$translate_motion_edit_confirm|}?')) $j('#form2').submit(); else return false; " />
            </td>
        </tr>
    </table>
</form>